{% extends 'base.html.twig' %}

{% block title %}
    {{ consultation.currentStep.name }}
{% endblock %}

{% block body %}
    <form id="consultation" method="post" action="{{ path('app_consultation_validate_step', {
        'consultationId': consultation.id,
        'stepId': consultation.currentStep.id
    }) }}">
        <section class="section columns">
            <div class="column is-one-quarter">
                <div class="box content is-small">
                    <h5 class="title is-5">Examens précédents</h5>
                    <dl>

                        {% for examen in consultation.symptoms %}

                            <p><b>{{ examen.examen }} :</b> {{ examen.symptom.name }}</p>
                        {% endfor %}
                    </dl>

                </div>
            </div>
            <div class="column is-6">
                <div class="card">
                    <div class="card-content">
                        <div class="content">
                            <p class="card-header-title">
                                {{ consultation.currentStep.name }}
                            </p>
                            <hr class="form-hr">
                            {% for examen in consultation.currentStep.examens %}
                                    {% if examen.subTitle is null %}
                                        <p class="title-examen has-text-centered">{{ examen.type.name }}</p>
                                    {% else %}
                                        <p class="title-examen has-text-centered">{{ examen.subTitle }}</p>
                                    {% endif %}
                                    {% for value in examen.availableValues %}
                                        <label class="checkbox">
                                            <input type="radio" name="{{ examen.id }}" value="{{ value.id }}" >
                                            {{ value.name }}
                                        </label>
                                    <br>
                                    {% endfor %}
                                    {% if not loop.last %}
                                        <br>
                                    {% endif %}
                                {% endfor %}

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <div id="submit">
            <input type="submit" id="btn-submit" class="button is-success" value="Valider">
        </div>
    </form>
{% endblock %}
